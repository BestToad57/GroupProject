@{
    ViewData["Title"] = "Admin Dashboard";
    var totalUsers = ViewBag.TotalUsers ?? 0;
    var totalPodcasts = ViewBag.TotalPodcasts ?? 0;
    var totalEpisodes = ViewBag.TotalEpisodes ?? 0;
    var totalSubscriptions = ViewBag.TotalSubscriptions ?? 0;
    var adminCount = ViewBag.AdminCount ?? 0;
    var podcasterCount = ViewBag.PodcasterCount ?? 0;
    var listenerCount = ViewBag.ListenerCount ?? 0;
    var recentPodcasts = ViewBag.RecentPodcasts as IEnumerable<GroupProject.Code.Models.Podcast>;
    var recentEpisodes = ViewBag.RecentEpisodes as IEnumerable<GroupProject.Code.Models.Episode>;
}

<div class="container my-4">
    <div class="text-center mb-5">
        <h1 class="fw-bold mb-2" style="color: var(--primary-red);">
            <i class="fas fa-tachometer-alt me-2"></i>Admin Dashboard
        </h1>
        <p class="lead text-muted">System Overview and Management</p>
    </div>

    <!-- Statistics Cards -->
    <div class="row g-4 mb-4">
        <div class="col-md-3">
            <div class="card shadow-lg text-center">
                <div class="card-body">
                    <i class="fas fa-users fa-3x mb-3" style="color: var(--primary-red);"></i>
                    <h3 class="mb-0">@totalUsers</h3>
                    <p class="text-muted mb-0">Total Users</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card shadow-lg text-center">
                <div class="card-body">
                    <i class="fas fa-podcast fa-3x mb-3" style="color: var(--primary-red);"></i>
                    <h3 class="mb-0">@totalPodcasts</h3>
                    <p class="text-muted mb-0">Total Podcasts</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card shadow-lg text-center">
                <div class="card-body">
                    <i class="fas fa-list fa-3x mb-3" style="color: var(--primary-red);"></i>
                    <h3 class="mb-0">@totalEpisodes</h3>
                    <p class="text-muted mb-0">Total Episodes</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card shadow-lg text-center">
                <div class="card-body">
                    <i class="fas fa-bookmark fa-3x mb-3" style="color: var(--primary-red);"></i>
                    <h3 class="mb-0">@totalSubscriptions</h3>
                    <p class="text-muted mb-0">Total Subscriptions</p>
                </div>
            </div>
        </div>
    </div>

    <!-- User Role Breakdown -->
    <div class="row g-4 mb-4">
        <div class="col-md-12">
            <div class="card shadow-lg">
                <div class="card-header">
                    <h4 class="mb-0 text-white">
                        <i class="fas fa-user-tag me-2"></i>User Role Distribution
                    </h4>
                </div>
                <div class="card-body">
                    <div class="row text-center">
                        <div class="col-md-4">
                            <div class="mb-2">
                                <span class="badge bg-danger" style="font-size: 1.2rem;">@adminCount</span>
                            </div>
                            <h5 class="text-light">Admins</h5>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-2">
                                <span class="badge bg-primary" style="font-size: 1.2rem;">@podcasterCount</span>
                            </div>
                            <h5 class="text-light">Podcasters</h5>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-2">
                                <span class="badge bg-success" style="font-size: 1.2rem;">@listenerCount</span>
                            </div>
                            <h5 class="text-light">Listeners</h5>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Recent Activity -->
    <div class="row g-4">
        <!-- Recent Podcasts -->
        <div class="col-md-6">
            <div class="card shadow-lg">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h4 class="mb-0 text-white">
                        <i class="fas fa-podcast me-2"></i>Recent Podcasts
                    </h4>
                    <a asp-action="Podcasts" class="btn btn-sm btn-outline-light">View All</a>
                </div>
                <div class="card-body">
                    @if (recentPodcasts != null && recentPodcasts.Any())
                    {
                        <div class="list-group list-group-flush">
                            @foreach (var podcast in recentPodcasts)
                            {
                                <div class="list-group-item bg-transparent border-secondary">
                                    <div class="d-flex w-100 justify-content-between">
                                        <h6 class="mb-1 text-light">@podcast.Title</h6>
                                        <small class="text-muted">@podcast.CreatedDate.ToString("MMM dd")</small>
                                    </div>
                                    <p class="mb-1 text-muted small">by @podcast.CreatorID</p>
                                </div>
                            }
                        </div>
                    }
                    else
                    {
                        <p class="text-muted text-center">No podcasts yet</p>
                    }
                </div>
            </div>
        </div>

        <!-- Recent Episodes -->
        <div class="col-md-6">
            <div class="card shadow-lg">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h4 class="mb-0 text-white">
                        <i class="fas fa-list me-2"></i>Recent Episodes
                    </h4>
                    <a asp-action="Episodes" class="btn btn-sm btn-outline-light">View All</a>
                </div>
                <div class="card-body">
                    @if (recentEpisodes != null && recentEpisodes.Any())
                    {
                        <div class="list-group list-group-flush">
                            @foreach (var episode in recentEpisodes)
                            {
                                <div class="list-group-item bg-transparent border-secondary">
                                    <div class="d-flex w-100 justify-content-between">
                                        <h6 class="mb-1 text-light">@episode.Title</h6>
                                        <small class="text-muted">@episode.ReleaseDate.ToString("MMM dd")</small>
                                    </div>
                                    <p class="mb-1 text-muted small">
                                        <i class="fas fa-clock me-1"></i>@episode.Duration.ToString(@"hh\:mm\:ss")
                                    </p>
                                </div>
                            }
                        </div>
                    }
                    else
                    {
                        <p class="text-muted text-center">No episodes yet</p>
                    }
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="card shadow-lg mt-4">
        <div class="card-header">
            <h4 class="mb-0 text-white">
                <i class="fas fa-bolt me-2"></i>Quick Actions
            </h4>
        </div>
        <div class="card-body">
            <div class="row g-3">
                <div class="col-md-3">
                    <a asp-action="Users" class="btn btn-outline-primary w-100">
                        <i class="fas fa-users me-2"></i>Manage Users
                    </a>
                </div>
                <div class="col-md-3">
                    <a asp-action="Podcasts" class="btn btn-outline-primary w-100">
                        <i class="fas fa-podcast me-2"></i>All Podcasts
                    </a>
                </div>
                <div class="col-md-3">
                    <a asp-action="Episodes" class="btn btn-outline-primary w-100">
                        <i class="fas fa-list me-2"></i>All Episodes
                    </a>
                </div>
                <div class="col-md-3">
                    <a asp-action="ModerateComments" class="btn btn-outline-primary w-100">
                        <i class="fas fa-comments me-2"></i>Moderate Comments
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>